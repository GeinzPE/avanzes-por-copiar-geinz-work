package com.geinzz.geinzwork.herramientas_geinz.constantes

import com.geinzz.geinzwork.data.model.dataclass_seguridad.EntidadNLP

object proms_gen_IA {

    fun generarPromptPromoVenta_solo_una_generacion(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE EN VENTA DIRECTA.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio (ej: 120, cuesta 120, S/120), usa el s√≠mbolo s/

Reglas:
- Genera UNA SOLA opci√≥n
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol comercial y persuasivo
- Llamados a la acci√≥n claros (ej: Aprovecha, Compra hoy, No te lo pierdas)
- Sin emojis
- No exageres beneficios irreales

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun generarPromptPromoAtencion_solo_una_generacion(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE EN LLAMAR LA ATENCI√ìN.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio, usa el s√≠mbolo s/

Reglas:
- Genera UNA SOLA opci√≥n
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol claro y atractivo
- Usa preguntas, ganchos creativos o beneficios impactantes
- Sin emojis
- No uses promesas falsas

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun generarPromptPromoInformativo_solo_una_generacion(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE PROFESIONAL E INFORMATIVO.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio, usa el s√≠mbolo s/

Reglas:
- Genera UNA SOLA opci√≥n
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol profesional, claro y confiable
- Explica el valor del producto o servicio sin exageraciones
- Sin emojis
- Tono serio y elegante

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun generarPromptPromoVenta(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE EN VENTA DIRECTA.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio (ej: 120, cuesta 120, S/120), usa el s√≠mbolo s/

Reglas:
- Genera EXACTAMENTE 3 opciones distintas
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol comercial y persuasivo
- Llamados a la acci√≥n claros (ej: Aprovecha, Compra hoy, No te lo pierdas)
- Sin emojis
- No exageres beneficios irreales

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
Opcion 1:
T:
D:

Opcion 2:
T:
D:

Opcion 3:
T:
D:
""".trimIndent()
    }

    fun generarPromptPromoAtencion(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE EN LLAMAR LA ATENCI√ìN.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio, usa el s√≠mbolo s/

Reglas:
- Genera EXACTAMENTE 3 opciones distintas
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol claro y atractivo
- Usa preguntas, ganchos creativos o beneficios impactantes
- Sin emojis
- No uses promesas falsas

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
Opcion 1:
T:
D:

Opcion 2:
T:
D:

Opcion 3:
T:
D:
""".trimIndent()
    }

    fun generarPromptPromoInformativo(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String
    ): String {
        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n con ENFOQUE PROFESIONAL E INFORMATIVO.
Usa SOLO la informaci√≥n proporcionada. NO inventes datos ni precios.
Si el usuario menciona un precio, usa el s√≠mbolo s/

Reglas:
- Genera EXACTAMENTE 3 opciones distintas
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol profesional, claro y confiable
- Explica el valor del producto o servicio sin exageraciones
- Sin emojis
- Tono serio y elegante

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad

Salida EXACTA:
Opcion 1:
T:
D:

Opcion 2:
T:
D:

Opcion 3:
T:
D:
""".trimIndent()
    }


    fun generarPromptNotificacionOptimizado(
        tituloPublicacion: String, descCorta: String, // ‚â§60 chars
        nombreTienda: String, localidad: String, diasRestantes: Int
    ): String {

        return """
Genera un t√≠tulo (‚â§40) y una descripci√≥n (‚â§90) para notificaci√≥n.
No inventes datos. Espa√±ol neutro.
Usa M√ÅXIMO 1 emoji SOLO en el t√≠tulo. Sin emojis en la descripci√≥n.
Texto claro, directo y comercial. Incluye CTA breve.

Datos:
t:$tituloPublicacion
d:$descCorta
n:$nombreTienda
l:$localidad
r:$diasRestantes

Urgencia:
r=1 -> "√öltimo d√≠a"
r<=3 -> "√öltimos d√≠as"
r>3 -> "Por tiempo limitado"

Salida EXACTA:
T: texto
D: texto
""".trimIndent()
    }

    fun generarPromptPromocionProduccion(
        tituloUsuario: String,
        descripcionUsuario: String,
        nombreTienda: String,
        localidad: String,
    ): String {

        return """
Mejora el t√≠tulo y la descripci√≥n de una promoci√≥n usando SOLO la informaci√≥n dada.
No inventes datos ni precios.
Genera EXACTAMENTE 3 opciones distintas.

Reglas:
- T√≠tulo ‚â§60 caracteres
- Descripci√≥n 30‚Äì50 palabras
- Espa√±ol claro y comercial
- Sin emojis
- Texto profesional y directo

Datos reales:
titulo:$tituloUsuario
descripcion:$descripcionUsuario
tienda:$nombreTienda
localidad:$localidad


Salida EXACTA:
Opcion 1:
T:
D:

Opcion 2:
T:
D:

Opcion 3:
T:
D:
""".trimIndent()
    }


    fun generarPromptPromocion_text_compartir(
        tituloUsuario: String,
        descripcionUsuario: String,
    ): String {

        return """
Crea un mensaje muy corto para compartir y provocar clic inmediato.

Reglas:
- M√°x 80 caracteres
- Espa√±ol
- Usa informaci√≥n concreta del t√≠tulo
- Inicio fuerte y directo
- EXACTAMENTE 2 emojis
- Sin preguntas
- Sin relleno
- Devuelve SOLO el texto

Datos:
$tituloUsuario
$descripcionUsuario
""".trimIndent()
    }


    fun generarPromptWhatsAppContacto(
        titulo: String,
        descripcion: String,
    ): String {

        return """
Act√∫a como un cliente interesado que contacta por WhatsApp.

Reglas:
- Mensaje de WhatsApp
- M√°x 60 caracteres
- Espa√±ol
- Natural y respetuoso
- Estructura: saludo + inter√©s en el t√≠tulo + pregunta de disponibilidad
- Incluye EXACTAMENTE 1 emoji
- No inventes datos
- Devuelve SOLO el mensaje

Datos:
T√≠tulo: $titulo
Descripci√≥n: $descripcion
""".trimIndent()
    }


    fun generarPromptNotificacionSeleccionada(
        tituloPublicacion: String, descCorta: String
    ): String {

        return """
Crea una notificaci√≥n PUSH comercial.
Reescribe desde cero, pero CONSERVA los datos clave del contexto.
No inventes informaci√≥n.

Reglas:
- Mant√©n producto, precio y lugar si existen
- Cambia redacci√≥n y enfoque (beneficio / urgencia / acci√≥n)
- T√≠tulo y descripci√≥n deben ser nuevos
- T√≠tulo ‚â§40, descripci√≥n ‚â§90
- Espa√±ol neutro, CTA corto
- 1 emoji SOLO en t√≠tulo

Base (contexto):
T:$tituloPublicacion
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }

    fun promptNotificacionVenta(tituloPublicacion: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Venta üõí.
NO crees informaci√≥n nueva.
Optimiza el texto del usuario para que sea persuasivo y orientado a conversi√≥n.

Objetivo:
Impulsar clics o compras manteniendo los datos reales (producto, precio, lugar si existen).

Reglas:
- Mant√©n el significado original
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Lenguaje claro, directo y comercial
- CTA corto y concreto
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$tituloPublicacion
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionAtencion(tituloPublicacion: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Llamado de atenci√≥n ‚ú®.
NO inventes informaci√≥n.

Objetivo:
Captar inter√©s y aumentar la apertura de la notificaci√≥n.

Reglas:
- Respeta el contenido original
- NO elimines precios si existen
- NO inventes precios
- Si hay precios, form√°talos como: s/
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Usa ganchos claros, no enga√±osos
- CTA opcional y corto
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$tituloPublicacion
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionUrgencia(tituloPublicacion: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Urgencia ‚è∞.
NO agregues escasez falsa ni inventes tiempos o precios.

Objetivo:
Motivar acci√≥n r√°pida cuando el contexto lo justifica.

Reglas:
- Mant√©n los datos originales
- NO borres precios
- NO inventes precios
- Precios siempre en formato: s/
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Urgencia clara pero real
- CTA corto y directo
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$tituloPublicacion
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionNovedad(tituloPublicacion: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Novedad üÜï.
NO inventes lanzamientos, exclusividades ni precios.

Objetivo:
Informar y generar inter√©s en algo reciente o actualizado.

Reglas:
- Respeta el contenido original
- NO elimines precios si est√°n presentes
- NO inventes precios
- Usa el formato s/ si hay precios
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Lenguaje informativo y atractivo
- CTA corto opcional
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$tituloPublicacion
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionServicios(titulo: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Servicio üõ†Ô∏è.
NO crees informaci√≥n nueva.
Optimiza el texto escrito por el usuario para que sea claro, profesional y √∫til.

Objetivo:
Informar sobre cambios en locales, m√©todos de pago, servicios o novedades importantes.

Reglas:
- Mant√©n el significado original
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Lenguaje claro y directo
- CTA opcional
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$titulo
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionCita(titulo: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Cita / Reserva üìÖ.
NO inventes datos.
Convierte el texto del usuario en un recordatorio claro y accionable.

Objetivo:
Recordar citas, reservas o servicios agendados.

Reglas:
- Respeta fecha, hora y contexto
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- CTA corto si aplica (confirmar, asistir, ver)
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$titulo
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionReposicion(titulo: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Reposici√≥n üõí.
NO agregues productos ni datos nuevos.
Optimiza el texto para que informe claramente la llegada o reposici√≥n.

Objetivo:
Avisar disponibilidad de nuevos productos o stock renovado.

Reglas:
- Mant√©n la informaci√≥n original
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- CTA corto invitando a revisar
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$titulo
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }


    fun promptNotificacionOperativa(titulo: String, descCorta: String): String {
        return """
Adapta y mejora una notificaci√≥n PUSH de tipo: Operativa ‚ö†Ô∏è.
NO crees ni exageres informaci√≥n.
Haz el mensaje m√°s claro y entendible para el usuario.

Objetivo:
Informar cambios de √∫ltima hora, cierres inesperados o ajustes operativos.

Reglas:
- Mant√©n el mensaje original
- T√≠tulo ‚â§40 caracteres, descripci√≥n ‚â§90
- Claridad y urgencia leve
- CTA opcional
- 1 emoji SOLO en el t√≠tulo

Texto original:
T:$titulo
D:$descCorta

Salida EXACTA:
T:
D:
""".trimIndent()
    }

}


fun generarPromptNombreGeneracionIA(
    titulo: String,
    descripcion: String
): String {
    return """
Devuelve SOLO el nombre final.
NO incluyas etiquetas como "Nombre:", ni comillas, ni explicaciones.
M√°ximo 40 caracteres.
Incluye exactamente 1 emoji relevante.
Resume sin inventar.

T√≠tulo: $titulo
Descripci√≥n: $descripcion
""".trimIndent()
}


//val GEINZ_SEARCH_PARSER_PROMPT = """
//Eres Geinz Search Parser, un motor de procesamiento de lenguaje natural de alta precisi√≥n.
//
//Tu √∫nica funci√≥n es convertir el texto del usuario
//en un objeto JSON estructurado para filtrar el historial de generaciones de IA.
//
//Reglas estrictas de an√°lisis
//
//1. Limpieza absoluta
//Elimina palabras de intenci√≥n o relleno. Ignora expresiones como:
//"b√∫scame", "mu√©strame", "quiero ver", "encu√©ntrame", "d√≥nde est√°",
//"todas las", "que tengan", "a ver", "ens√©√±ame".
//
//2. T√©rminos detectados
//Extrae TODOS los conceptos o temas relevantes mencionados por el usuario.
//Devu√©lvelos en singular y en min√∫sculas.
//No combines t√©rminos.
//No inventes t√©rminos.
//
//Ejemplo:
//"generaciones de creatina prote√≠na y col√°geno"
//‚Üí ["creatina", "prote√≠na", "col√°geno"]
//
//3. Precio (si aplica)
//Si se menciona un monto (ej. "20 soles", "50"), extrae solo el n√∫mero entero.
//Si no se menciona, usa null.
//
//4. Tiempo
//Detecta referencias temporales como:
//"hoy", "ayer", "esta semana", "este mes", "este a√±o",
//o fechas expl√≠citas como "07/06/2016", "febrero 2017".
//
//Devu√©lvelas como texto literal.
//Si no hay referencia temporal, usa null.
//
//5. Prioridad fija
//Si el usuario menciona que algo es "fijo", "guardado", "permanente" o equivalente,
//establece prioridad_fija en true. Caso contrario, false.
//
//Formato de salida obligatorio
//
//Devuelve SIEMPRE este objeto JSON:
//
//{
//  "terminos": [],
//  "precio": null,
//  "tiempo": null,
//  "prioridad_fija": false
//}
//
//Reglas finales
//- Responde √∫nicamente con JSON v√°lido
//- No saludes
//- No expliques
//- No agregues texto adicional
//- No uses Markdown ni bloques de c√≥digo
//""".trimIndent()

fun String?.clean(): String? =
    this?.takeIf { it.isNotBlank() && it.lowercase() != "null" }


fun procesaro_por_vos(
    nombreDelNegocio: String,
    cantidad: Int,
    terminos: List<String>,
    tiempo: String?,
    precio: String?,
    prioridad: String?,
    tipo: String?
): String {

    // --- Construcci√≥n flexible de la descripci√≥n ---
    val partesBusqueda = mutableListOf<String>()

    if (terminos.isNotEmpty()) {
        partesBusqueda.add(terminos.joinToString(", "))
    }

    tiempo.clean()?.let {
        partesBusqueda.add(it)
    }

    precio.clean()?.let {
        partesBusqueda.add("con un precio $it")
    }

    val descripcionBusqueda =
        if (partesBusqueda.isEmpty()) ""
        else partesBusqueda.joinToString(" ")

    val textoTipo = tipo.clean() ?: "resultados"

    val textoPrioridad = when (prioridad.clean()?.lowercase()) {
        "guardado", "permanente" -> " que tienes guardado"
        else -> ""
    }

    val ayudasFinales = if (cantidad == 0) {
        listOf(
            "Puedo intentar la b√∫squeda con otros criterios.",
            "La b√∫squeda se puede ajustar en cualquier momento.",
            "Hay otras formas de encontrar lo que buscas.",
            "Puedo seguir ayud√°ndote con otra opci√≥n."
        )
    } else {
        listOf(
            "Puedo ayudarte a ajustar los resultados.",
            "Los filtros se pueden modificar si lo necesitas.",
            "Hay m√°s opciones disponibles para explorar.",
            "Puedo seguir asistiendo con esta b√∫squeda."
        )
    }.random()


    // --- Respuesta principal ---
    val respuestaPrincipal = when {
        cantidad == 0 -> listOf(
            "No encontr√© $textoTipo $descripcionBusqueda en $nombreDelNegocio.",
            "No hay resultados disponibles con esos criterios en $nombreDelNegocio.",
            "No obtuve coincidencias esta vez en $nombreDelNegocio.",
            "No se encontraron resultados para esa b√∫squeda."
        ).random()

        cantidad in 1..20 -> listOf(
            "Encontr√© $cantidad $textoTipo $descripcionBusqueda en $nombreDelNegocio.",
            "Tengo $cantidad $textoTipo listos para mostrar.",
            "Estos son los $cantidad $textoTipo disponibles.",
            "Ya prepar√© los $cantidad $textoTipo para que los revises."
        ).random()

        cantidad > 20 -> listOf(
            "Encontr√© varios $textoTipo $descripcionBusqueda en $nombreDelNegocio.",
            "Hay una cantidad considerable de $textoTipo disponibles.",
            "Tengo muchos resultados listos para mostrar.",
            "Encontr√© m√∫ltiples opciones para esta b√∫squeda."
        ).random()

        else -> listOf(
            "Aqu√≠ tienes los $textoTipo $descripcionBusqueda en $nombreDelNegocio.",
            "$nombreDelNegocio, estos son los $textoTipo que encontr√© para ti.",
            "Ya dej√© listos los resultados para que los revises con calma."
        ).random()
    }

    // --- Resultado final (respuesta + ayuda) ---
    return "$respuestaPrincipal $ayudasFinales"
}

//fun procesarBusquedaConIA_promp(textoUsuario: String): String {
//
//    return """
//Eres Geinz Search Parser, un motor de procesamiento de lenguaje natural de alta precisi√≥n.
//
//Tu √∫nica funci√≥n es convertir el texto del usuario
//en un objeto JSON estructurado para filtrar el historial de generaciones de IA.
//
//Reglas estrictas de an√°lisis
//
//1. Limpieza absoluta
//Elimina palabras de intenci√≥n, verbos de acci√≥n y relleno. Ignora expresiones como:
//"b√∫scame", "mu√©strame", "quiero ver", "encu√©ntrame", "d√≥nde est√°",
//"todas las", "que tengan", "a ver", "ens√©√±ame", "resultados", "mostrar", "realic√©".
//
//2. T√©rminos detectados
//Extrae SOLO conceptos o temas relevantes para un historial de IA.
//- Devu√©lvelos en singular y en min√∫sculas.
//- No combines t√©rminos.
//- No inventes t√©rminos.
//- No incluyas n√∫meros, fechas o palabras gen√©ricas.
//
//Ejemplo:
//"generaciones de creatina prote√≠na y col√°geno"
//‚Üí ["creatina", "prote√≠na", "col√°geno"]
//
//3. Precio
//Si se menciona un monto (ej. "20 soles", "50"), extrae solo el n√∫mero entero como texto.
//Si no se menciona, devuelve el valor JSON nulo literal: null (NO "null")
//
//4. Tiempo
//Detecta referencias temporales expl√≠citas:
//- Relativas: "hoy", "ayer", "esta semana", "este mes", "este a√±o", etc.
//- Absolutas: "dd/mm/yyyy", "yyyy-mm-dd", meses y a√±os escritos.
//Devuelve el valor JSON nulo literal: null si no se detecta nada.
//
//5. Prioridad
//Si el usuario menciona que algo es "guardado", "fijo", "permanente" o equivalente,
//devuelve ese texto literal en el campo prioridad.
//Si no se menciona, devuelve null literal.
//
//6. Tipo de historial
//Detecta si el usuario se refiere expl√≠citamente a alguno de estos tipos:
//- "publicacion"
//- "notificacion"
//- "generacion_publicacion_sin_pulicar"
//- "notificacion_sin_publicar"
//
//Devuelve SOLO uno de esos valores como texto.
//Si el usuario no especifica el tipo, devuelve null literal.
//
//Formato de salida obligatorio
//
//Devuelve SIEMPRE este objeto JSON:
//
//{
//  "terminos": [],
//  "precio": null,
//  "tiempo": null,
//  "prioridad": null,
//  "tipo": null
//}
//
//Reglas finales
//- Responde √∫nicamente con JSON v√°lido
//- No saludes
//- No expliques
//- No agregues texto adicional
//- No uses comillas para null
//- Usa null solo cuando el usuario NO haya mencionado expl√≠citamente ese dato
//- No completes campos por suposici√≥n
//
//Texto del usuario:
//"$textoUsuario"
//""".trimIndent()
//}
fun procesarBusquedaConIA_promp(textoUsuario: String): String {

    return """
Eres Geinz Search Parser, un motor de NLP.

Convierte el texto del usuario en un JSON para filtrar historial de IA:

1. Limpieza
Elimina verbos de acci√≥n y palabras de relleno como: "b√∫scame", "mu√©strame", "quiero ver", "encu√©ntrame", "a ver", "ens√©√±ame", "mostrar", "realic√©".

2. T√©rminos
Extrae SOLO conceptos relevantes, en singular y min√∫scula. No combines t√©rminos, no inventes, no incluyas n√∫meros, fechas o palabras gen√©ricas.
Ejemplo: "generaciones de creatina prote√≠na" ‚Üí ["creatina","prote√≠na"] 

3. D√≠as restantes
Detecta menciones futuras de d√≠as que quedan: "quedan 5 d√≠as", "hasta 3 d√≠as", "menos de 5 d√≠as", "m√°s de 5 d√≠as".  
- Devuelve **solo el n√∫mero entero**, sin comparadores ni palabras.  
- Ejemplo: "quedan 5 d√≠as" ‚Üí "5", "m√°s de 10 d√≠as" ‚Üí "10".  
- Ignora tiempo pasado: "hace 2 d√≠as", "5 d√≠as atr√°s". Devuelve null si no hay.

4. Tiempo
Detecta referencias temporales pasadas o relativas: "hoy", "ayer", "esta semana", fechas. Devuelve null si no hay.

5. Prioridad
Si menciona "guardado", "fijo", "permanente", devuelve el texto. Si no, null.

6. Tipo
Detecta uno de: "publicacion", "notificacion", "generacion_publicacion_sin_pulicar", "notificacion_sin_publicar". Si no, null.

JSON obligatorio:

{
  "terminos": [],
  "dias_restantes": null,
  "tiempo": null,
  "prioridad": null,
  "tipo": null
}

Reglas finales
- Responde solo con JSON v√°lido, sin explicaciones ni saludos.
- Usa null literal si no hay dato.
- No completes campos por suposici√≥n.

Texto del usuario:
"$textoUsuario"
""".trimIndent()
}


fun extraer_terminos_para_GenIA(textos: String): String {
    return """
        Eres un extractor de t√©rminos clave para b√∫squedas y filtrado. 
        Analiza el siguiente texto y devuelve √∫nicamente las palabras m√°s importantes, √∫nicas y representativas en formato JSON:

        Texto:
        "$textos"
    """.trimIndent()
}

//fun construirPromptNLP(textoUsuario: String): String {
//    return """
//Eres un extractor NLP.
//Extrae la intenci√≥n y el t√©rmino clave del texto.
//Acciones posibles:
//- llamar
//- buscar
//- whatsapp
//- ruta
//- info
//- distancia
//Reglas:
//- No expliques nada
//- No inventes
//- Devuelve SOLO JSON v√°lido
//- Si no es claro usa "desconocido"
//- Normaliza el t√©rmino clave eliminando art√≠culos y may√∫sculas
//Formato:
//{"a":"","t":"","c":"a|m|b"}
//Texto:
//$textoUsuario
//""".trim()
//}
//fun construirPromptNLP(textoUsuario: String): String {
//    return """
//Eres un extractor NLP de emergencias.
//Devuelve SOLO un objeto JSON v√°lido.
//
//Campos obligatorios:
//"a": llamar, whatsapp, dar_numero, buscar, ruta, info, distancia, desconocido
//"t": t√©rmino clave en min√∫sculas
//"g": salud, seguridad u otro
//"c": a (alta), m (media), b (baja)
//
//Reglas:
//- Si no hay acci√≥n clara, usa "desconocido"
//- No agregues texto fuera del JSON
//- No expliques nada
//
//Ejemplos:
//"Quiero ir a la comisar√≠a central"
//{"a":"ruta","t":"comisar√≠a","g":"seguridad","c":"a"}
//
//"Dime el tel√©fono del hospital regional"
//{"a":"dar_numero","t":"hospital","g":"salud","c":"a"}
//
//"Hola qu√© tal"
//{"a":"desconocido","t":"","g":"otro","c":"b"}
//
//Texto:
//"$textoUsuario"
//
//JSON:
//""".trimIndent()
//}

fun construirPromptNL2P(textoUsuario: String): String {
    return """
Eres un extractor NLP de emergencias.
Responde SOLO JSON v√°lido.

Formato:
{"a":"","t":"","g":"","c":""}

Campos:
"a": ruta, dar_numero, llamar, whatsapp, info, distancia, buscar, desconocido
"t": t√©rmino clave del texto normalizado en min√∫sculas sin art√≠culos sin diminutivo ni cambios bruscos
"g": salud, seguridad, otro
"c": a (alta), m (media), b (baja)

Reglas:
- Si solo reporta un hecho ‚Üí "a":"desconocido"
- Si es saludo o no se entiende ‚Üí {"a":"desconocido","t":"","g":"otro","c":"b"}
- No expliques nada.
- No agregues texto fuera del JSON.

Ejemplo:
-"Me robaron el celular"
{"a":"desconocido","t":"robo","g":"seguridad","c":"a"}
-"quiero ver los poli"
{"a":"buscar","t":"polica","g":"seguridad","c":"m"}

Texto: "$textoUsuario"
""".trimIndent()
}

fun construirPromptNLP(textoUsuario: String): String {
    return """
Extractor NLP de emergencias.
Responde SOLO JSON:
{"a":"","t":"","g":"","c":""}

a: ruta, dar_numero, llamar, whatsapp, info, distancia, buscar, desconocido
t: palabra clave en min√∫sculas sin art√≠culos ni plural
g: salud, seguridad, otro
c: a, m, b

Reglas:
1) Corrige errores ortogr√°ficos leves.
2) Si reporta incidente o s√≠ntoma ‚Üí a:"desconocido".
3) Si pide mostrar, ver o explorar entidades ‚Üí a:"buscar".
4) Si pide horario, direccion, telefono, numero u otro dato espec√≠fico ‚Üí a:"info".
5) numero expl√≠cito ‚Üí dar_numero | llamar expl√≠citamente ‚Üí llamar | distancia ‚Üí distancia | como llegar ‚Üí ruta.
6) Delito ‚Üí seguridad | S√≠ntoma ‚Üí salud.
7) Emergencia grave ‚Üí c:"a" | Incidente no cr√≠tico ‚Üí c:"m" | Navegaci√≥n ‚Üí c:"b".
8) Si no se entiende ‚Üí {"a":"desconocido","t":"","g":"otro","c":"b"}.

Texto: "$textoUsuario"
""".trimIndent()
}


fun construir_promp_NLP_depromo_y_oferta(textoUsuario:String,categoira_selec:String): String {
    return """
    Eres un extractor de datos categor√≠a $categoira_selec.
    Extrae producto principal (sin cantidades), atributos, precio, m√©todo de pago y comodidades.
    No inventes datos. Si no aparece:
    - precio: null
    - listas: []

    Diminutivos en forma normal.

    M√©todo_pago solo puede ser:
    yape (si dice "llave"), plin (si dice "link"), efectivo, agora, visa, mastercard.

    Comodidades solo si aparecen o se parecen:
    wifi, zona_expandida, servicios_higienicos, camaras_de_seguridad, sala_de_espera,sala_juegos, mesa_para_ninos, estacionamiento, enchufe, aire_acondicionado, ingreso_mascotas.

    Responde solo JSON:
    {"principal":"string","atributos":[],"precio":number|null,"metodo_pago":[],"comodidades":[]}

Texto: "$textoUsuario"
""".trimIndent()
}

fun construir_prompt_NLP_para_busqueda(textoUsuario: String, categoria: String): String {
    return """
    Extrae t√©rminos de b√∫squeda del siguiente texto en categor√≠a $categoria.
    
    Reglas:
    - Solo productos, cantidades, marcas y precios que aparezcan literalmente en el texto.
    - No inventes t√©rminos.
    - No agregues explicaciones.
    - No agregues texto adicional.
    - No uses markdown.
    - No nombre del negocio 
    - No ubicacion
    - Todo en minuscula y evita diminutivos
    
    La respuesta debe ser √∫nicamente un arreglo de strings.
    Debe empezar con [ y terminar con ] NO AGREGES MAS TEXTO SOLO EL ARRAY.
    
    Texto: "$textoUsuario"
    """.trimIndent()
}